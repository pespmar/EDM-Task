---
title: "Model Testing"
author: "Pablo, Juan, Alejandro"
date: "2024-06-22"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```




```{r}
load('Data.RData')
```



# GRÁFICOS EXPLORATORIOS


```{r}
datos_agrupados = MoliDelSol %>%
  group_by(FECHA) %>% summarise(total = sum(NO))


```



```{r}
library(ggplot2)
library(plotly)
# Crear el gráfico temporal
 p = ggplot(datos_agrupados, aes(x = FECHA, y = total)) +
  geom_line(color = 'blue') +
  labs(x = "Date", y = "Value", title = "Gráfico Temporal") +
  theme_minimal()
 
 
 ggplotly(p)

```








```{r}
opciones = c("AvenidaFrancia", "Centre", "MoliDelSol",
             "PistaDeSilla", "UPV", "Olivereta"
             , "Puerto" , "COMPLETE")
```

```{r}
graficosPMporHora <- list()


```



# Gráficos de partículas por horas


```{r}
library(ggplot2)
library(plotly)
library(dplyr)

for (opcion in opciones){
  
  c = get(opcion)
          
  datos_limpios <- c %>%
  filter(!is.na(PM2.5)) %>% filter(!is.na(HORA)) %>%
  group_by(HORA) %>%
  summarise(total = mean(PM2.5))
  
  
plot <- plot_ly(datos_limpios, x = ~HORA, y = ~total, type = 'scatter', mode = 'lines', line = list(color = 'blue')) %>%
  layout(title = 'Temporal Graph grouped by hour of the day',
         xaxis = list(title = 'Hour' , range = c(0,24)),
         yaxis = list(title = 'PM2.5' , range = c(0, 20)),
         showlegend = FALSE)
  
  graficosPMporHora[[opcion]] =plot
  
  
}


```



```{r}
graficosPMporHora$COMPLETE
```



```{r}
COMPLETES = COMPLETE %>% slice(1:1000)
plot_ly(COMPLETES , x = ~CO, y = ~NO , type = 'scatter', mode = 'markers')
```








```{r}
save (graficosPMporHora, file = 'PreRenderedGraphs.RData')
```







